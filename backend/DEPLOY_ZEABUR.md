# Деплой бэкенда на Zeabur

## Пошаговая инструкция

### 1. Подготовка проекта

Убедитесь, что у вас есть все необходимые файлы:
- ✅ `package.json` - с правильными скриптами
- ✅ `zeabur.json` - конфигурация для Zeabur
- ✅ `.zeaburignore` - файлы для игнорирования
- ✅ `.env` - переменные окружения (создайте на основе env.example)

### 2. Создание аккаунта на Zeabur

1. Перейдите на [zeabur.com](https://zeabur.com/)
2. Зарегистрируйтесь через GitHub
3. Подтвердите email

### 3. Деплой проекта

#### Способ 1: Через веб-интерфейс (рекомендуется)

1. Войдите в [Dashboard Zeabur](https://dash.zeabur.com/)
2. Нажмите "New Project"
3. Выберите "Deploy from GitHub"
4. Подключите ваш GitHub репозиторий
5. Выберите папку `backend` как корневую директорию
6. Zeabur автоматически определит Node.js проект

#### Способ 2: Через GitHub Actions

1. Создайте новый проект в Zeabur
2. Подключите GitHub репозиторий
3. Zeabur автоматически создаст GitHub Action для деплоя
4. При каждом push в main ветку будет происходить автоматический деплой

### 4. Настройка переменных окружения

В панели управления Zeabur добавьте следующие переменные:

```
NODE_ENV=production
PORT=3001
FRONTEND_URL=https://your-frontend-domain.com
YANDEX_API_KEY=your_actual_api_key
YANDEX_FOLDER_ID=your_actual_folder_id
DB_PATH=/tmp/analyses.db
```

### 5. Настройка домена (опционально)

1. В панели управления сервисом
2. Перейдите в "Domains"
3. Добавьте ваш домен или используйте предоставленный Zeabur домен

### 6. Мониторинг

После деплоя вы можете:
- Просматривать логи в реальном времени
- Мониторить использование ресурсов
- Настраивать автоскейлинг

## Важные моменты

### База данных
- SQLite файл будет храниться в `/tmp` директории
- При перезапуске сервиса данные могут быть потеряны
- Для продакшена рекомендуется использовать внешнюю БД (PostgreSQL, MySQL)

### Переменные окружения
- Никогда не коммитьте `.env` файл
- Все секретные ключи добавляйте через панель Zeabur
- `FRONTEND_URL` должен указывать на ваш фронтенд домен

### Производительность
- Zeabur автоматически масштабирует ваш сервис
- Мониторьте использование ресурсов
- Настройте rate limiting под ваши нужды

## Troubleshooting

### Проблемы с деплоем
1. Проверьте логи в панели Zeabur
2. Убедитесь, что все зависимости указаны в `package.json`
3. Проверьте правильность переменных окружения

### Проблемы с подключением к YandexGPT
1. Проверьте правильность API ключа
2. Убедитесь, что Folder ID корректный
3. Проверьте сетевые настройки

### Проблемы с CORS
1. Обновите `FRONTEND_URL` в переменных окружения
2. Перезапустите сервис после изменения переменных

## Ссылки

- [Zeabur Documentation](https://docs.zeabur.com/)
- [Node.js на Zeabur](https://docs.zeabur.com/guides/nodejs)
- [Environment Variables](https://docs.zeabur.com/guides/environment-variables)